<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport"
              content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
        <title>간단한 지도 표시하기</title>
        <script type="text/javascript"
                src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=49tdbelq95"></script>
        <script src=" https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

        <style>
            #map {
                width: 100%;
                height: 400px;
            }
        </style>

        <script>
            $(document).ready(function () {
                // 네이버에서 지도를 만든다 : new naver.maps 파라메터로 center 중앙 위치를 경도, 위도로 넣어줌. zoom 은 10정도 땡겨줘, 
                /* let map = new naver.maps.Map('map', {
                    center: new naver.maps.LatLng(37.4981125, 127.0379399),
                    zoom: 10
                }); */

                // 네이버에서 지도를 만든다 : new naver.maps.Map 파라메터로 center 중앙 위치를 경도, 위도로 넣어줌. zoom 은 10정도 땡겨줘, 
                let map = new naver.maps.Map('map', {
                    center: new naver.maps.LatLng(37.4981125, 127.0379399),
                    zoom: 10,
                    zoomControl: true,
                    zoomControlOptions: { // 줌 버튼 넣기
                        style: naver.maps.ZoomControlStyle.SMALL, 
                        position: naver.maps.Position.TOP_RIGHT
                    }
                });

                                
                // 지도 위에 마커 만든다 : new naver.maps.Marker
                let marker = new naver.maps.Marker({
                    position: new naver.maps.LatLng(37.4981125, 127.0379399),
                    map: map,// 어느 지도에 보여줄 것이냐를 설정함. 위에 map 변수로 넣었으니, map 이 되어야 함. 
                    icon: "{{ url_for('static', filename='rtan_heart.png') }}" // 마커 이미지를 static 에 저장한 png 파일로 적용하기.
                });                


                // 지도 마커에 InfoWindow 만들기 
                let infowindow = new naver.maps.InfoWindow({
                    content: `<div style="width: 50px;height: 20px;text-align: center"><h5>안녕!</h5></div>`, // 지정한 형식으로 띄우기
                });
                
                naver.maps.Event.addListener(marker, "click", function () { // addListener 로 이벤트 설정하기, marker 를 기준으로, 'click' 했을 때, 이 함수 수행할 것
                    console.log(infowindow.getMap()); 
                    if (infowindow.getMap()) {// 정보창이 열려있을 때는 연결된 지도를 반환하고 (=True) 닫혀있을 때는 null (= False) 을 반환.
                        infowindow.close(); // infowindow 창이 열려 있을 때는 닫아주고, 
                    } else {
                        infowindow.open(map, marker); // infowindow 창이 닫혀 있을 때는, 열어주고 (적용할 지도 변수, 마커 변수 이름 지정)
                    }
                });
            })
        </script>
    </head>
    <body>
        <!-- div id 값인 "map" 은 네이버 api 규칙에 따라 이름 설정 함. -->
        <div id="map"></div>
    </body>
</html>